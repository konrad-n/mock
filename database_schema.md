# SledzSpecke Database Schema

## All Tables and Columns

### 1. Absences
- **Id** (uuid, NOT NULL) - Primary Key
- **SpecializationId** (integer, NOT NULL)
- **UserId** (integer, NOT NULL)
- **Type** (text, NOT NULL)
- **StartDate** (timestamptz, NOT NULL)
- **EndDate** (timestamptz, NOT NULL)
- **DurationInDays** (integer, NOT NULL)
- **Description** (varchar(1000))
- **DocumentPath** (varchar(500))
- **IsApproved** (boolean, NOT NULL)
- **ApprovedAt** (timestamptz)
- **ApprovedBy** (integer)
- **SyncStatus** (text, NOT NULL)
- **AdditionalFields** (varchar(2000))
- **CreatedAt** (timestamptz, NOT NULL)
- **UpdatedAt** (timestamptz, NOT NULL)

### 2. AdditionalSelfEducationDays
- **Id** (integer, NOT NULL) - Primary Key
- **ModuleId** (integer, NOT NULL)
- **InternshipId** (integer, NOT NULL)
- **StartDate** (date, NOT NULL)
- **EndDate** (date, NOT NULL)
- **NumberOfDays** (integer, NOT NULL)
- **Purpose** (varchar(500), NOT NULL)
- **EventName** (varchar(200), NOT NULL)
- **Location** (varchar(200))
- **Organizer** (varchar(200))
- **IsApproved** (boolean, NOT NULL)
- **CreatedAt** (timestamptz, NOT NULL)
- **UpdatedAt** (timestamptz, NOT NULL)

### 3. AuditLogs
- **Id** (uuid, NOT NULL) - Primary Key
- **EntityType** (varchar(100), NOT NULL)
- **EntityId** (varchar(100), NOT NULL)
- **Action** (varchar(50), NOT NULL)
- **UserId** (varchar(100), NOT NULL)
- **Timestamp** (timestamptz, NOT NULL)
- **OldValues** (jsonb)
- **NewValues** (jsonb)
- **PropertyName** (varchar(100))

### 4. Courses
- **Id** (integer, NOT NULL) - Primary Key
- **SpecializationId** (integer, NOT NULL)
- **ModuleId** (integer)
- **CourseType** (integer, NOT NULL)
- **CourseName** (varchar(300), NOT NULL)
- **CourseNumber** (varchar(100))
- **InstitutionName** (varchar(200), NOT NULL)
- **CompletionDate** (timestamptz, NOT NULL)
- **HasCertificate** (boolean, NOT NULL)
- **CertificateNumber** (varchar(100))
- **IsApproved** (boolean, NOT NULL)
- **ApprovalDate** (timestamptz)
- **ApproverName** (varchar(200))
- **SyncStatus** (integer, NOT NULL)
- **CreatedAt** (timestamptz, NOT NULL)
- **UpdatedAt** (timestamptz, NOT NULL)
- **CmkpCertificateNumber** (text)
- **CmkpVerificationDate** (timestamptz)
- **DurationDays** (integer, NOT NULL)
- **DurationHours** (integer, NOT NULL)
- **EndDate** (timestamptz, NOT NULL)
- **IsVerifiedByCmkp** (boolean, NOT NULL)
- **Location** (text)
- **OrganizerName** (text, NOT NULL)
- **StartDate** (timestamptz, NOT NULL)

### 5. EducationalActivities
- **Id** (integer, NOT NULL) - Primary Key
- **SpecializationId** (integer, NOT NULL)
- **ModuleId** (integer)
- **Type** (text, NOT NULL)
- **Title** (varchar(200), NOT NULL)
- **Description** (varchar(2000))
- **StartDate** (timestamptz, NOT NULL)
- **EndDate** (timestamptz, NOT NULL)
- **SyncStatus** (text, NOT NULL)
- **CreatedAt** (timestamptz, NOT NULL)
- **UpdatedAt** (timestamptz, NOT NULL)

### 6. FileMetadata
- **Id** (uuid, NOT NULL) - Primary Key
- **FileName** (varchar(255), NOT NULL)
- **FilePath** (varchar(500), NOT NULL)
- **ContentType** (varchar(100), NOT NULL)
- **FileSize** (bigint, NOT NULL)
- **UploadedByUserId** (integer, NOT NULL)
- **UploadedAt** (timestamptz, NOT NULL)
- **Description** (varchar(1000))
- **EntityType** (varchar(100))
- **EntityId** (varchar(100))
- **IsDeleted** (boolean, NOT NULL)
- **DeletedAt** (timestamptz)

### 7. Internships
- **Id** (integer, NOT NULL) - Primary Key
- **SpecializationId** (integer, NOT NULL)
- **ModuleId** (integer)
- **InstitutionName** (varchar(200), NOT NULL)
- **DepartmentName** (varchar(200), NOT NULL)
- **SupervisorName** (varchar(200), NOT NULL)
- **StartDate** (timestamptz, NOT NULL)
- **EndDate** (timestamptz, NOT NULL)
- **DaysCount** (integer, NOT NULL)
- **IsCompleted** (boolean, NOT NULL)
- **IsApproved** (boolean, NOT NULL)
- **ApprovalDate** (timestamptz)
- **ApproverName** (varchar(200))
- **SyncStatus** (integer, NOT NULL)
- **CreatedAt** (timestamptz, NOT NULL)
- **UpdatedAt** (timestamptz, NOT NULL)
- **CompletedDays** (integer, NOT NULL)
- **Name** (text, NOT NULL)
- **PlannedDays** (integer, NOT NULL)
- **PlannedWeeks** (integer, NOT NULL)
- **Status** (text, NOT NULL)

### 8. MedicalShifts
- **Id** (integer, NOT NULL) - Primary Key
- **InternshipId** (integer, NOT NULL)
- **Date** (timestamptz, NOT NULL)
- **Hours** (integer, NOT NULL)
- **Minutes** (integer, NOT NULL)
- **Location** (varchar(200), NOT NULL)
- **Year** (integer, NOT NULL)
- **SyncStatus** (integer, NOT NULL)
- **AdditionalFields** (varchar(2000))
- **ApprovalDate** (timestamptz)
- **ApproverName** (varchar(200))
- **ApproverRole** (varchar(100))
- **CreatedAt** (timestamptz, NOT NULL)
- **UpdatedAt** (timestamptz, NOT NULL)
- **ExemptionEndDate** (timestamptz)
- **ExemptionReason** (text)
- **ExemptionStartDate** (timestamptz)
- **IsExempt** (boolean, NOT NULL)
- **ModuleId** (integer)
- **SupervisorName** (text)
- **Type** (text, NOT NULL)

### 9. Modules
- **Id** (integer, NOT NULL) - Primary Key
- **SpecializationId** (integer, NOT NULL)
- **Type** (integer, NOT NULL)
- **SmkVersion** (varchar(50), NOT NULL)
- **Version** (integer, NOT NULL)
- **Name** (varchar(200), NOT NULL)
- **StartDate** (timestamptz, NOT NULL)
- **EndDate** (timestamptz)
- **Structure** (jsonb)
- **CompletedInternships** (integer, NOT NULL)
- **TotalInternships** (integer, NOT NULL)
- **CompletedCourses** (integer, NOT NULL)
- **TotalCourses** (integer, NOT NULL)
- **CompletedProceduresA** (integer, NOT NULL)
- **TotalProceduresA** (integer, NOT NULL)
- **CompletedProceduresB** (integer, NOT NULL)
- **TotalProceduresB** (integer, NOT NULL)
- **CompletedShiftHours** (integer, NOT NULL)
- **RequiredShiftHours** (integer, NOT NULL)
- **WeeklyShiftHours** (integer, NOT NULL)
- **CompletedSelfEducationDays** (integer, NOT NULL)
- **TotalSelfEducationDays** (integer, NOT NULL)

### 10. OutboxMessages
- **Id** (uuid, NOT NULL) - Primary Key
- **Type** (varchar(200), NOT NULL)
- **Data** (jsonb, NOT NULL)
- **OccurredAt** (timestamptz, NOT NULL)
- **ProcessedAt** (timestamptz)
- **Error** (text)
- **RetryCount** (integer, NOT NULL)
- **Metadata** (jsonb)

### 11. Procedures
- **Id** (integer, NOT NULL) - Primary Key
- **InternshipId** (integer, NOT NULL)
- **Date** (timestamptz, NOT NULL)
- **Year** (integer, NOT NULL)
- **Code** (varchar(100), NOT NULL)
- **PerformingPerson** (varchar(100), NOT NULL)
- **Location** (varchar(200), NOT NULL)
- **PatientInitials** (varchar(20), NOT NULL)
- **PatientGender** (varchar(20), NOT NULL)
- **AssistantData** (varchar(100), NOT NULL)
- **ProcedureGroup** (varchar(100), NOT NULL)
- **Status** (integer, NOT NULL)
- **SyncStatus** (integer, NOT NULL)
- **AdditionalFields** (varchar(2000))
- **CreatedAt** (timestamptz, NOT NULL)
- **UpdatedAt** (timestamptz, NOT NULL)
- **SmkVersion** (varchar(50), NOT NULL)
- **Comments** (text)
- **CountA** (integer, NOT NULL)
- **CountB** (integer, NOT NULL)
- **Discriminator** (character varying)
- **Institution** (text)
- **InternshipName** (text)
- **ModuleId** (integer)
- **ProcedureName** (text)
- **ProcedureOldSmk_ProcedureRequirementId** (integer)
- **ProcedureRequirementId** (integer)
- **Supervisor** (text)
- **ExecutionType** (text)
- **Name** (text)
- **PatientInfo** (text)
- **PerformedDate** (timestamptz)
- **ProcedureOldSmk_RequiredCountCodeA** (integer)
- **RequiredCountCodeA** (integer)
- **RequiredCountCodeB** (integer)
- **SupervisorName** (text)

### 12. Publications
- **Id** (integer, NOT NULL) - Primary Key
- **SpecializationId** (integer, NOT NULL)
- **UserId** (integer, NOT NULL)
- **Type** (text, NOT NULL)
- **Title** (varchar(500), NOT NULL)
- **Authors** (varchar(1000), NOT NULL)
- **Journal** (varchar(300))
- **Publisher** (varchar(300))
- **PublicationDate** (timestamptz, NOT NULL)
- **Volume** (varchar(50))
- **Issue** (varchar(50))
- **Pages** (varchar(50))
- **DOI** (varchar(200))
- **PMID** (varchar(50))
- **ISBN** (varchar(50))
- **URL** (varchar(500))
- **Abstract** (text)
- **Keywords** (varchar(500))
- **FilePath** (varchar(500))
- **IsFirstAuthor** (boolean, NOT NULL)
- **IsCorrespondingAuthor** (boolean, NOT NULL)
- **IsPeerReviewed** (boolean, NOT NULL)
- **SyncStatus** (text, NOT NULL)
- **AdditionalFields** (varchar(2000))
- **CreatedAt** (timestamptz, NOT NULL)
- **UpdatedAt** (timestamptz, NOT NULL)
- **ImpactFactor** (numeric)

### 13. Recognitions
- **Id** (integer, NOT NULL) - Primary Key
- **SpecializationId** (integer, NOT NULL)
- **UserId** (integer, NOT NULL)
- **Type** (text, NOT NULL)
- **Title** (varchar(300), NOT NULL)
- **Description** (varchar(2000))
- **Institution** (varchar(300), NOT NULL)
- **StartDate** (timestamptz, NOT NULL)
- **EndDate** (timestamptz)
- **DaysReduction** (integer, NOT NULL)
- **IsApproved** (boolean, NOT NULL)
- **ApprovedAt** (timestamptz)
- **ApprovedBy** (integer)
- **DocumentPath** (varchar(500))
- **SyncStatus** (text, NOT NULL)
- **AdditionalFields** (varchar(2000))
- **CreatedAt** (timestamptz, NOT NULL)
- **UpdatedAt** (timestamptz, NOT NULL)

### 14. SagaStates
- **Id** (uuid, NOT NULL) - Primary Key
- **Type** (varchar(200), NOT NULL)
- **State** (jsonb, NOT NULL)
- **CreatedAt** (timestamptz, NOT NULL)
- **CompletedAt** (timestamptz)
- **ErrorMessage** (text)
- **Data** (jsonb)

### 15. SagaSteps
- **Id** (uuid, NOT NULL) - Primary Key
- **SagaId** (uuid, NOT NULL)
- **Name** (varchar(200), NOT NULL)
- **Status** (varchar(50), NOT NULL)
- **StartedAt** (timestamptz, NOT NULL)
- **CompletedAt** (timestamptz)
- **ErrorMessage** (text)

### 16. SelfEducations
- **Id** (integer, NOT NULL) - Primary Key
- **Hours** (integer, NOT NULL)
- **Type** (integer, NOT NULL)
- **ModuleId** (integer, NOT NULL)
- **Description** (varchar(500))
- **PublicationTitle** (varchar(500))
- **IsPeerReviewed** (boolean)
- **SyncStatus** (integer, NOT NULL)
- **CreatedAt** (timestamptz, NOT NULL)
- **UpdatedAt** (timestamptz, NOT NULL)
- **Date** (timestamptz, NOT NULL)
- **JournalName** (text)
- **Role** (text)

### 17. SpecializationTemplates
- **Id** (integer, NOT NULL) - Primary Key
- **Code** (varchar(100), NOT NULL)
- **Name** (varchar(200), NOT NULL)
- **Version** (varchar(50), NOT NULL)
- **JsonContent** (jsonb, NOT NULL)
- **IsActive** (boolean, NOT NULL)
- **CreatedAt** (timestamptz, NOT NULL)
- **UpdatedAt** (timestamptz, NOT NULL)

### 18. Specializations
- **Id** (integer, NOT NULL) - Primary Key
- **Name** (varchar(100), NOT NULL)
- **ProgramCode** (varchar(100), NOT NULL)
- **SmkVersion** (varchar(50), NOT NULL)
- **StartDate** (timestamptz, NOT NULL)
- **PlannedEndDate** (timestamptz, NOT NULL)
- **CalculatedEndDate** (timestamptz)
- **ProgramStructure** (jsonb)
- **CurrentModuleId** (integer)
- **DurationYears** (integer, NOT NULL)
- **ActualEndDate** (timestamptz)
- **BasicModuleCompletionDate** (timestamptz)
- **HasBasicModule** (boolean, NOT NULL)
- **HasSpecializedModule** (boolean, NOT NULL)
- **PlannedPesYear** (integer)
- **ProgramVariant** (text)
- **Status** (text, NOT NULL)
- **UserId** (integer, NOT NULL)

### 19. Users
- **Id** (integer, NOT NULL) - Primary Key
- **Email** (varchar(100), NOT NULL)
- **Password** (text, NOT NULL)
- **FirstName** (varchar(100), NOT NULL)
- **LastName** (varchar(100), NOT NULL)
- **SecondName** (varchar(100))
- **DateOfBirth** (timestamptz, NOT NULL)
- **PhoneNumber** (varchar(20), NOT NULL)
- **RegistrationDate** (timestamptz, NOT NULL)
- **LastLoginAt** (timestamptz)
- **EmailNotificationsEnabled** (boolean, NOT NULL)
- **NotificationsEnabled** (boolean, NOT NULL)
- **CreatedAt** (timestamptz, NOT NULL)
- **CorrespondenceAddress_Street** (varchar(200), NOT NULL)
- **CorrespondenceAddress_HouseNumber** (varchar(50), NOT NULL)
- **CorrespondenceAddress_ApartmentNumber** (varchar(50))
- **CorrespondenceAddress_City** (varchar(100), NOT NULL)
- **CorrespondenceAddress_PostalCode** (varchar(10), NOT NULL)
- **CorrespondenceAddress_Province** (varchar(100), NOT NULL)
- **CorrespondenceAddress_Country** (varchar(100), NOT NULL)

## Notes
- Most tables include audit fields: CreatedAt, UpdatedAt
- Many tables have SyncStatus for SMK system integration
- Foreign key relationships exist between:
  - Users → Specializations
  - Specializations → Modules
  - Modules → Internships, Courses, Procedures, MedicalShifts
  - Internships → MedicalShifts, Procedures